<!DOCTYPE html>
<html>
<head>
  <title>WFM Request Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      padding: 40px;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .user-banner {
      text-align: center;
      margin-bottom: 20px;
      font-size: 14px;
      color: #555;
    }
    .logout-button {
      display: block;
      margin: 0 auto 30px auto;
      padding: 8px 16px;
      background-color: #ccc;
      color: #333;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      width: fit-content;
    }
    form {
      max-width: 700px;
      margin: 0 auto;
      background-color: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: bold;
      color: #444;
    }
    input[type="text"],
    input[type="date"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      font-size: 14px;
    }
    input[type="file"] {
      margin-top: 10px;
    }
    textarea {
      resize: vertical;
      height: 100px;
    }
    button {
      margin-top: 30px;
      padding: 12px 20px;
      background-color: #0078D4;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background-color: #005fa3;
    }
  </style>
</head>
<body>
  <h1>Submit WFM Request</h1>

  {% if session.user_email %}
    <div class="user-banner">
      Logged in as <strong>{{ session.user_email }}</strong>
    </div>
    <a href="/logout" class="logout-button">Logout</a>
  {% endif %}

  <form method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
    <label>Advisor Name:</label>
    <input type="text" name="advisor_name" required>

    <label>Date of Request:</label>
    <input type="date" name="request_date" required>

    <label>Line of Business (LoB):</label>
    <select name="lob" required>
      <option value="" disabled selected>Select LoB</option>
      <option value="ERO">ERO</option>
      <option value="IT">IT</option>
      <option value="MoveBuddy">MoveBuddy</option>
      <option value="PS Admin">PS Admin</option>
      <option value="PS BO">PS BO</option>
      <option value="PS Case Mgr">PS Case Mgr</option>
      <option value="PS CC">PS CC</option>
      <option value="PS Onboarding">PS Onboarding</option>
      <option value="PS Sales">PS Sales</option>
      <option value="QA">QA</option>
      <option value="SS Case Management">SS Case Management</option>
      <option value="SS Onboarding">SS Onboarding</option>
      <option value="SS Sales">SS Sales</option>
      <option value="TL/LoD">TL/LoD</option>
      <option value="Training">Training</option>
      <option value="WL PS">WL PS</option>
      <option value="WL SS">WL SS</option>
      <option value="Workforce Management">Workforce Management</option>
    </select>

    <label>Team Lead:</label>
    <select name="team_lead" required>
      <option value="" disabled selected>Select Team Lead</option>
      <option value="Adeyinka">Adeyinka</option>
      <option value="Alana">Alana</option>
      <option value="Alexandra">Alexandra</option>
      <option value="Aman">Aman</option>
      <option value="Bryan">Bryan</option>
      <option value="Cushana">Cushana</option>
      <option value="David">David</option>
      <option value="Dee">Dee</option>
      <option value="Jodi">Jodi</option>
      <option value="Julianne">Julianne</option>
      <option value="Kristin">Kristin</option>
      <option value="Lucas">Lucas</option>
      <option value="Maggie">Maggie</option>
      <option value="Mike">Mike</option>
      <option value="Odette">Odette</option>
      <option value="Pat">Pat</option>
      <option value="Salomon">Salomon</option>
      <option value="Sean">Sean</option>
      <option value="Shavindri">Shavindri</option>
      <option value="Teresa">Teresa</option>
    </select>

    <label>WFM Request Type:</label>
    <select name="wfm_request" id="wfm_request" onchange="toggleRequestFields()" required>
      <option value="" disabled selected>Select Request Type</option>
      <option value="Accommodation request/update">Accommodation request/update</option>
      <option value="Add additional hours">Add additional hours</option>
      <option value="Add/remove/change team meeting">Add/remove/change team meeting</option>
      <option value="Add/remove/move training">Add/remove/move training</option>
      <option value="Add offline segment">Add offline segment</option>
      <option value="Advisor arrived late, remove absence">Advisor arrived late, remove absence</option>
      <option value="CP skill update">CP skill update</option>
      <option value="Employee status update (not for schedule changes)">Employee status update (not for schedule changes)</option>
      <option value="Is OT available?">Is OT available?</option>
      <option value="Move break/lunch because of meeting">Move break/lunch because of meeting</option>
      <option value="Schedule Update - CP3 use">Schedule Update - CP3 use</option>
      <option value="Schedule Error Adjustment">Schedule Error Adjustment</option>
      <option value="Shift swap/offer">Shift swap/offer</option>
      <option value="Suggestions/Feedback">Suggestions/Feedback</option>
      <option value="Unpaid time off/vacation">Unpaid time off/vacation</option>
      <option value="Testing">Testing</option>
    </select>

      <!-- Accommodation Section -->
    <div id="accommodationFields" style="display:none;">
      <label>Advisor Name for Accommodation:</label>
      <input type="text" name="accommodation_advisor_name">

      <label>Accommodation Details:</label>
      <textarea name="accommodation_details"></textarea>

      <label>Effective Date:</label>
      <input type="date" name="accommodation_effective_date">
    </div>

    <!-- Add Additional Hours Section -->
    <div id="addHoursFields" style="display:none;">
      <label>Additional Hours Requested:</label>
      <input type="number" name="additional_hours">

      <label>Date(s):</label>
      <input type="text" name="additional_hours_dates" placeholder="e.g., 2025-11-15, 2025-11-16">
    </div>

    <!-- Team Meeting Section -->
    <div id="teamMeetingFields" style="display:none;">
      <label>Meeting Details:</label>
      <textarea name="meeting_details"></textarea>
    </div>

    <!-- Training Section -->
    <div id="trainingFields" style="display:none;">
      <label>Training Name:</label>
      <input type="text" name="training_name">

      <label>Training Date:</label>
      <input type="date" name="training_date">
    </div>

    <!-- Offline Segment Section -->
    <div id="offlineFields" style="display:none;">
      <label>Offline Type:</label>
      <input type="text" name="offline_type">

      <label>Duration (minutes):</label>
      <input type="number" name="offline_duration">
    </div>

    <!-- Advisor Arrived Late Section -->
    <div id="lateArrivalFields" style="display:none;">
      <label>Late Arrival Time:</label>
      <input type="text" name="late_arrival_time" placeholder="e.g., 09:15">

      <label>Reason:</label>
      <textarea name="late_reason"></textarea>
    </div>

    <!-- CP Skill Update Section -->
    <div id="CPskillupdateFields" style="display:none;">
      <label>Skill Type:</label>
      <select id="skillType" name="skillType">
        <option value="" disabled selected>Select skill type</option>
        <option value="english">English Skills</option>
        <option value="french">French Skills</option>
      </select>

      <label>Action:</label>
      <select id="skillAction" name="skillAction">
        <option value="" disabled selected>Select action</option>
        <option value="add">Add</option>
        <option value="remove">Remove</option>
      </select>

      <label>Skill Name:</label>
      <input type="text" name="skillName" placeholder="Enter skill name">
    </div>

    <!-- OT Available Section -->
    <div id="otAvailableFields" style="display:none;">
      <label>Request Date:</label>
      <input type="date" name="ot_request_date">

      <label>Additional Notes:</label>
      <textarea name="ot_notes"></textarea>
    </div>

    <!-- Move Break/Lunch Section -->
    <div id="moveBreakFields" style="display:none;">
      <label>Current Break/Lunch Time:</label>
      <input type="text" name="current_break_time" placeholder="e.g., 12:00 PM">

      <label>New Requested Time:</label>
      <input type="text" name="new_break_time" placeholder="e.g., 1:00 PM">
    </div>

    <!-- Schedule Update Section -->
    <div id="scheduleUpdateFields" style="display:none;">
      <label>Current Schedule Details:</label>
      <textarea name="current_schedule"></textarea>

      <label>Requested Schedule Changes:</label>
      <textarea name="requested_schedule"></textarea>
    </div>

    <!-- Schedule Error Adjustment -->
    <div id="scheduleErrorFields" style="display:none;">
      <label>Error Description:</label>
      <textarea name="error_description"></textarea>

      <label>Correction Details:</label>
      <textarea name="correction_details"></textarea>
    </div>

    <!-- Shift Swap/Offer -->
    <div id="shiftSwapFields" style="display:none;">
      <label>Swap/Offer Details:</label>
      <textarea name="swap_details"></textarea>

      <label>Other Advisor Name (if applicable):</label>
      <input type="text" name="other_advisor_name">
    </div>

    <!-- Suggestions/Feedback -->
    <div id="suggestionsFields" style="display:none;">
      <label>Your Suggestion or Feedback:</label>
      <textarea name="suggestion_text"></textarea>
    </div>

    <!-- Unpaid Time Off/Vacation -->
    <div id="unpaidFields" style="display:none;">
      <label>Date(s) Requested:</label>
      <input type="text" name="unpaid_dates" placeholder="e.g., 2025-11-12 to 2025-11-15">

      <label>Reason:</label>
      <textarea name="unpaid_reason"></textarea>
    </div>

    <!-- Testing -->
    <div id="testingFields" style="display:none;">
      <label>Testing Notes:</label>
      <textarea name="testing_notes"></textarea>
    </div>

        <!-- Employee Status Update (not for schedule changes) -->
    <div id="employeeStatusFields" style="display:none;">
      <label>Employee Status Change:</label>
      <select name="employee_status_change" required>
        <option value="" disabled selected>Select Status Change Type</option>
        <option value="New Hire">New Hire</option>
        <option value="Termination">Termination</option>
        <option value="Transfer">Transfer</option>
        <option value="Leave of Absence">Leave of Absence</option>
        <option value="Return from Leave">Return from Leave</option>
      </select>

      <label>Effective Date:</label>
      <input type="date" name="employee_status_effective_date">

      <label>Additional Details:</label>
      <textarea name="employee_status_details"></textarea>
    </div>

    <!-- Submit -->
    <button type="submit">Submit Request</button>
  </form>

  <script>
    function toggleRequestFields() {
      const sections = [
        "accommodationFields",
        "addHoursFields",
        "teamMeetingFields",
        "trainingFields",
        "offlineFields",
        "lateArrivalFields",
        "CPskillupdateFields",
        "employeeStatusFields",
        "otAvailableFields",
        "moveBreakFields",
        "scheduleUpdateFields",
        "scheduleErrorFields",
        "shiftSwapFields",
        "suggestionsFields",
        "unpaidFields",
        "testingFields"
      ];

      sections.forEach(id => document.getElementById(id).style.display = "none");

      const selected = document.getElementById("wfm_request").value;
      switch (selected) {
        case "Accommodation request/update":
          document.getElementById("accommodationFields").style.display = "block";
          break;
        case "Add additional hours":
          document.getElementById("addHoursFields").style.display = "block";
          break;
        case "Add/remove/change team meeting":
          document.getElementById("teamMeetingFields").style.display = "block";
          break;
        case "Add/remove/move training":
          document.getElementById("trainingFields").style.display = "block";
          break;
        case "Add offline segment":
          document.getElementById("offlineFields").style.display = "block";
          break;
        case "Advisor arrived late, remove absence":
          document.getElementById("lateArrivalFields").style.display = "block";
          break;
        case "CP skill update":
          document.getElementById("CPskillupdateFields").style.display = "block";
          break;
        case "Employee status update (not for schedule changes)":
          document.getElementById("employeeStatusFields").style.display = "block";
          break;
        case "Is OT available?":
          document.getElementById("otAvailableFields").style.display = "block";
          break;
        case "Move break/lunch because of meeting":
          document.getElementById("moveBreakFields").style.display = "block";
          break;
        case "Schedule Update - CP3 use":
          document.getElementById("scheduleUpdateFields").style.display = "block";
          break;
        case "Schedule Error Adjustment":
          document.getElementById("scheduleErrorFields").style.display = "block";
          break;
        case "Shift swap/offer":
          document.getElementById("shiftSwapFields").style.display = "block";
          break;
        case "Suggestions/Feedback":
          document.getElementById("suggestionsFields").style.display = "block";
          break;
        case "Unpaid time off/vacation":
          document.getElementById("unpaidFields").style.display = "block";
          break;
        case "Testing":
          document.getElementById("testingFields").style.display = "block";
          break;
      }
    }

    function validateForm() {
      const requestType = document.getElementById("wfm_request").value;
      if (!requestType) {
        alert("Please select a WFM Request Type.");
        return false;
      }
      return true;
    }
  </script>
</body>
</html>
