<!DOCTYPE html>
<html>
<head>
  <title>WFM Request Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      padding: 40px;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    form {
      max-width: 800px;
      margin: 0 auto;
      background-color: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 20px;
      font-weight: bold;
      color: #444;
    }

    input[type="text"],
    input[type="date"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      margin-top: 8px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }

    textarea {
      resize: vertical;
      height: 100px;
    }

    button {
      margin-top: 30px;
      padding: 12px 20px;
      background-color: #0078D4;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #005fa3;
    }

    .section {
      display: none;
      margin-top: 20px;
      border-top: 1px solid #ddd;
      padding-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Submit WFM Request</h1>
  <form method="POST" onsubmit="return validateForm()">

    <!-- Core Fields -->
        <!-- Advisor Name -->
    <label>Advisor Name:</label>
    <input type="text" name="advisor_name" required>

    <!-- Date of Request -->
    <label>Date of Request:</label>
    <input type="date" name="request_date" required>

    <!-- Line of Business (LoB) -->
    <label>Line of Business (LoB):</label>
    <select name="lob" required>
      <option value="" disabled selected>Select LoB</option>
      <option value="ERO">ERO</option>
      <option value="IT">IT</option>
      <option value="MoveBuddy">MoveBuddy</option>
      <option value="PS Admin">PS Admin</option>
      <option value="PS BO">PS BO</option>
      <option value="PS Case Mgr">PS Case Mgr</option>
      <option value="PS CC">PS CC</option>
      <option value="PS Onboarding">PS Onboarding</option>
      <option value="PS Sales">PS Sales</option>
      <option value="QA">QA</option>
      <option value="SS Case Management">SS Case Management</option>
      <option value="SS Onboarding">SS Onboarding</option>
      <option value="SS Sales">SS Sales</option>
      <option value="TL/LoD">TL/LoD</option>
      <option value="Training">Training</option>
      <option value="WL PS">WL PS</option>
      <option value="WL SS">WL SS</option>
      <option value="Workforce Management">Workforce Management</option>
    </select>

    <!-- Team Lead -->
    <label>Team Lead:</label>
    <select name="team_lead" required>
      <option value="" disabled selected>Select Team Lead</option>
      <option value="Adeyinka">Adeyinka</option>
      <option value="Alana">Alana</option>
      <option value="Alexandra">Alexandra</option>
      <option value="Aman">Aman</option>
      <option value="Bryan">Bryan</option>
      <option value="Cushana">Cushana</option>
      <option value="David">David</option>
      <option value="Dee">Dee</option>
      <option value="Jodi">Jodi</option>
      <option value="Julianne">Julianne</option>
      <option value="Kristin">Kristin</option>
      <option value="Lucas">Lucas</option>
      <option value="Maggie">Maggie</option>
      <option value="Mike">Mike</option>
      <option value="Odette">Odette</option>
      <option value="Pat">Pat</option>
      <option value="Salomon">Salomon</option>
      <option value="Sean">Sean</option>
      <option value="Shavindri">Shavindri</option>
      <option value="Teresa">Teresa</option>
    </select>

    <!-- WFM Request Type -->
    <label>WFM Request Type:</label>
    <select name="wfm_request" id="wfm_request" onchange="toggleRequestFields()" required>
      <option value="" disabled selected>Select Request Type</option>
      <option value="Accommodation request/update">Accommodation request/update</option>
      <option value="Add additional hours">Add additional hours</option>
      <option value="Add/remove/change team meeting">Add/remove/change team meeting</option>
      <option value="Add/remove/move training">Add/remove/move training</option>
      <option value="Add offline segment">Add offline segment</option>
      <option value="Advisor arrived late, remove absence">Advisor arrived late, remove absence</option>
      <option value="CP skill update">CP skill update</option>
      <option value="Employee status update (not for schedule changes)">Employee status update (not for schedule changes)</option>
      <option value="Is OT available?">Is OT available?</option>
      <option value="Move break/lunch because of meeting">Move break/lunch because of meeting</option>
      <option value="Schedule Update - CP3 use">Schedule Update - CP3 use</option>
      <option value="Schedule Error Adjustment">Schedule Error Adjustment</option>
      <option value="Shift swap/offer">Shift swap/offer</option>
      <option value="Suggestions/Feedback">Suggestions/Feedback</option>
      <option value="Unpaid time off/vacation">Unpaid time off/vacation</option>
      <option value="Testing">Testing</option>
    </select>

    <!-- Accommodation request/update -->
<div id="AccommodationrequestupdateFields" class="section">
  <label>Accommodation Type:</label>
  <select name="accommodation_type">
    <option value="" disabled selected>Select type</option>
    <option value="School">School</option>
    <option value="Personal">Personal</option>
    <option value="Medical">Medical</option>
  </select>

  <label>Final Date of Accommodation:</label>
  <input type="date" name="final_date">

  <label>Return to Work Date:</label>
  <input type="date" name="return_to_work_date">

  <label>Do you have CP3 Approval?</label>
  <input type="radio" name="cp3_approval_status" value="Yes" onclick="toggleAccommodationCP3(true)"> Yes
  <input type="radio" name="cp3_approval_status" value="No" onclick="toggleAccommodationCP3(false)"> No

  <div id="cp3Upload" style="display:none;">
    <label>Upload CP3 Approval Screenshot:</label>
    <input type="file" name="cp3_approval" accept=".pdf,.jpg,.png">
  </div>

  <label>Notes or Reason:</label>
  <textarea name="accommodation_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Add additional hours -->
<div id="AddadditionalhoursFields" class="section">
  <label>How many days?</label>
  <input type="radio" name="additional_days" value="1 Day" onclick="toggleAdditionalHoursMode(false)"> 1 Day
  <input type="radio" name="additional_days" value="Multiple Days" onclick="toggleAdditionalHoursMode(true)"> Multiple Days

  <div id="singleDayFields">
    <label>Requested Date:</label>
    <input type="date" name="additional_hours_date">
    <label>Start Time:</label>
    <input type="text" name="additional_start_time" placeholder="HH:MM AM/PM">
    <label>End Time:</label>
    <input type="text" name="additional_end_time" placeholder="HH:MM AM/PM">
  </div>

  <div id="multiDayFields" style="display:none;">
    <label>Weekly Schedule:</label>
    <input type="text" name="mon_start" placeholder="Monday start time">
    <input type="text" name="mon_end" placeholder="Monday end time">
    <input type="text" name="tue_start" placeholder="Tuesday start time">
    <input type="text" name="tue_end" placeholder="Tuesday end time">
    <input type="text" name="wed_start" placeholder="Wednesday start time">
    <input type="text" name="wed_end" placeholder="Wednesday end time">
    <input type="text" name="thu_start" placeholder="Thursday start time">
    <input type="text" name="thu_end" placeholder="Thursday end time">
    <input type="text" name="fri_start" placeholder="Friday start time">
    <input type="text" name="fri_end" placeholder="Friday end time">
    <input type="text" name="sat_start" placeholder="Saturday start time">
    <input type="text" name="sat_end" placeholder="Saturday end time">
    <input type="text" name="sun_start" placeholder="Sunday start time">
    <input type="text" name="sun_end" placeholder="Sunday end time">
  </div>

  <label>Notes or Reason:</label>
  <textarea name="additional_hours_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Add/remove/change team meeting -->
<div id="AddremovechangeteammeetingFields" class="section">
  <label>Meeting Date:</label>
  <input type="date" name="team_meeting_date">
  <label>Start Time:</label>
  <input type="text" name="team_meeting_start" placeholder="HH:MM AM/PM">
  <label>End Time:</label>
  <input type="text" name="team_meeting_end" placeholder="HH:MM AM/PM">
  <label>Notes or Reason:</label>
  <textarea name="team_meeting_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Add/remove/move training -->
<div id="AddremovemovetrainingFields" class="section">
  <label>Training Date:</label>
  <input type="date" name="training_date">
  <label>Start Time:</label>
  <input type="text" name="training_start" placeholder="HH:MM AM/PM">
  <label>End Time:</label>
  <input type="text" name="training_end" placeholder="HH:MM AM/PM">
  <label>Notes or Reason:</label>
  <textarea name="training_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Add offline segment -->
<div id="AddofflinesegmentFields" class="section">
  <label>Segment Date:</label>
  <input type="date" name="offline_segment_date">
  <label>Start Time:</label>
  <input type="text" name="offline_segment_start" placeholder="HH:MM AM/PM">
  <label>End Time:</label>
  <input type="text" name="offline_segment_end" placeholder="HH:MM AM/PM">
  <label>Notes or Reason:</label>
  <textarea name="offline_segment_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Advisor arrived late, remove absence -->
<div id="AdvisorarrivedlateremoveabsenceFields" class="section">
  <label>Date of Late Arrival:</label>
  <input type="date" name="late_arrival_date">
  <label>Start Time:</label>
  <input type="text" name="late_arrival_start" placeholder="HH:MM AM/PM">
  <label>End Time:</label>
  <input type="text" name="late_arrival_end" placeholder="HH:MM AM/PM">
  <label>Notes or Reason:</label>
  <textarea name="late_arrival_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- CP skill update -->
<div id="CPskillupdateFields" class="section">
  <label>Skill to Update:</label>
  <input type="text" name="cp_skill_name" placeholder="Enter skill name">
  <label>New Skill Level:</label>
  <input type="text" name="cp_skill_level" placeholder="Enter new level or status">
  <label>Notes or Reason:</label>
  <textarea name="cp_skill_notes" placeholder="Explain the context or reason."></textarea>
</div>

    <!-- Employee status update (not for schedule changes) -->
<div id="EmployeestatusupdatenotforschedulechangesFields" class="section">
  <label>Employee Name or ID:</label>
  <input type="text" name="status_update_employee">
  <label>Status Change:</label>
  <input type="text" name="status_update_change" placeholder="e.g., Leave of absence, Resignation">
  <label>Effective Date:</label>
  <input type="date" name="status_update_date">
  <label>Notes or Reason:</label>
  <textarea name="status_update_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Is OT available? -->
<div id="IsOTavailableFields" class="section">
  <label>Location or Team:</label>
  <input type="text" name="ot_location" placeholder="e.g., ERO Tier 2">
  <label>Date(s) OT is being requested for:</label>
  <input type="text" name="ot_dates" placeholder="e.g., Nov 15â€“17">
  <label>Notes or Reason:</label>
  <textarea name="ot_availability_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Move break/lunch because of meeting -->
<div id="MovebreaklunchbecauseofmeetingFields" class="section">
  <label>Meeting Date:</label>
  <input type="date" name="move_break_date">
  <label>Original Break/Lunch Time:</label>
  <input type="text" name="original_break_time" placeholder="HH:MM AM/PM">
  <label>New Break/Lunch Time:</label>
  <input type="text" name="new_break_time" placeholder="HH:MM AM/PM">
  <label>Notes or Reason:</label>
  <textarea name="move_break_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Schedule Update - CP3 use -->
<div id="ScheduleUpdateCP3useFields" class="section">
  <label>Schedule Date:</label>
  <input type="date" name="schedule_cp3_date">
  <label>Start Time:</label>
  <input type="text" name="schedule_cp3_start" placeholder="HH:MM AM/PM">
  <label>End Time:</label>
  <input type="text" name="schedule_cp3_end" placeholder="HH:MM AM/PM">
  <label>Notes or Reason:</label>
  <textarea name="schedule_cp3_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Schedule Error Adjustment -->
<div id="ScheduleErrorAdjustmentFields" class="section">
  <label>Error Date:</label>
  <input type="date" name="schedule_error_date">
  <label>Describe the Error:</label>
  <input type="text" name="schedule_error_description" placeholder="e.g., Incorrect segment, missing time">
  <label>Notes or Reason:</label>
  <textarea name="schedule_error_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Shift swap/offer -->
<div id="ShiftswapofferFields" class="section">
  <label>Swap Date:</label>
  <input type="date" name="shift_swap_date">
  <label>Advisor You're Swapping With:</label>
  <input type="text" name="swap_with">
  <label>Notes or Reason:</label>
  <textarea name="shift_swap_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Suggestions/Feedback -->
<div id="SuggestionsFeedbackFields" class="section">
  <label>Your Suggestion or Feedback:</label>
  <textarea name="suggestions_notes" placeholder="Share your idea or feedback."></textarea>
</div>

<!-- Unpaid time off/vacation -->
<div id="UnpaidtimeoffvacationFields" class="section">
  <label>Start Date:</label>
  <input type="date" name="unpaid_start_date">
  <label>End Date:</label>
  <input type="date" name="unpaid_end_date">
  <label>Notes or Reason:</label>
  <textarea name="unpaid_timeoff_notes" placeholder="Explain the context or reason."></textarea>
</div>

<!-- Testing -->
<div id="TestingFields" class="section">
  <label>Test Field:</label>
  <input type="text" name="testing_field" placeholder="Enter test input">
  <label>Notes or Reason:</label>
  <textarea name="testing_notes" placeholder="Explain the context or reason."></textarea>
</div>

    <!-- Submit Button -->
    <button type="submit">Submit Request</button>
  </form>

  <script>
  // ðŸ”„ Toggle request-specific sections
  function toggleRequestFields() {
    const selected = document.getElementById("wfm_request").value;
    const allTypes = [
      "Accommodation request/update",
      "Add additional hours",
      "Add/remove/change team meeting",
      "Add/remove/move training",
      "Add offline segment",
      "Advisor arrived late, remove absence",
      "CP skill update",
      "Employee status update (not for schedule changes)",
      "Is OT available?",
      "Move break/lunch because of meeting",
      "Schedule Update - CP3 use",
      "Schedule Error Adjustment",
      "Shift swap/offer",
      "Suggestions/Feedback",
      "Unpaid time off/vacation",
      "Testing"
    ];

    allTypes.forEach(type => {
      const id = type.replace(/[\s\/()]/g, '') + "Fields";
      const section = document.getElementById(id);
      if (section) {
        section.style.display = (type === selected) ? "block" : "none";
      }
    });
  }

  // ðŸ“Ž Toggle CP3 upload for Accommodation
  function toggleAccommodationCP3(show) {
    const cp3Section = document.getElementById("cp3Upload");
    if (cp3Section) {
      cp3Section.style.display = show ? "block" : "none";
    }
  }

  // ðŸ“… Toggle between single-day and multi-day inputs for Additional Hours
  function toggleAdditionalHoursMode(isMultipleDays) {
    const singleDay = document.getElementById("singleDayFields");
    const multiDay = document.getElementById("multiDayFields");

    if (singleDay && multiDay) {
      singleDay.style.display = isMultipleDays ? "none" : "block";
      multiDay.style.display = isMultipleDays ? "block" : "none";
    }
  }

  // âœ… Validate form before submission
  function validateForm() {
    const advisorName = document.querySelector('input[name="advisor_name"]');
    const requestDate = document.querySelector('input[name="request_date"]');
    const lob = document.querySelector('select[name="lob"]');
    const teamLead = document.querySelector('select[name="team_lead"]');
    const requestType = document.getElementById("wfm_request").value;

    if (!advisorName.value || !requestDate.value || !lob.value || !teamLead.value || !requestType) {
      alert("Please complete all required fields.");
      return false;
    }

    const notesMap = {
      "Accommodation request/update": "accommodation_notes",
      "Add additional hours": "additional_hours_notes",
      "Add/remove/change team meeting": "team_meeting_notes",
      "Add/remove/move training": "training_notes",
      "Add offline segment": "offline_segment_notes",
      "Advisor arrived late, remove absence": "late_arrival_notes",
      "CP skill update": "cp_skill_notes",
      "Employee status update (not for schedule changes)": "status_update_notes",
      "Is OT available?": "ot_availability_notes",
      "Move break/lunch because of meeting": "move_break_notes",
      "Schedule Update - CP3 use": "schedule_cp3_notes",
      "Schedule Error Adjustment": "schedule_error_notes",
      "Shift swap/offer": "shift_swap_notes",
      "Suggestions/Feedback": "suggestions_notes",
      "Unpaid time off/vacation": "unpaid_timeoff_notes",
      "Testing": "testing_notes"
    };

    const notesField = document.querySelector(`textarea[name="${notesMap[requestType]}"]`);
    if (notesField && !notesField.value.trim()) {
      alert("Please provide notes or a reason for this request.");
      return false;
    }

    if (requestType === "Accommodation request/update") {
      const cp3Status = document.querySelector('input[name="cp3_approval_status"]:checked');
      const cp3Upload = document.querySelector('input[name="cp3_approval"]');
      if (cp3Status && cp3Status.value === "Yes" && !cp3Upload.value) {
        alert("Please upload CP3 approval screenshot.");
        return false;
      }
    }

    if (requestType === "Add additional hours") {
      const dayType = document.querySelector('input[name="additional_days"]:checked');
      if (!dayType) {
        alert("Please select whether you're adding hours for 1 Day or Multiple Days.");
        return false;
      }

      if (dayType.value === "1 Day") {
        const date = document.querySelector('input[name="additional_hours_date"]');
        const start = document.querySelector('input[name="additional_start_time"]');
        const end = document.querySelector('input[name="additional_end_time"]');
        if (!date.value || !start.value || !end.value) {
          alert("Please complete date, start time, and end time.");
          return false;
        }
      }

      if (dayType.value === "Multiple Days") {
        const days = ["mon", "tue", "wed", "thu", "fri", "sat", "sun"];
        let validDay = false;
        for (let d of days) {
          const start = document.querySelector(`input[name="${d}_start"]`);
          const end = document.querySelector(`input[name="${d}_end"]`);
          if (start && end && start.value && end.value) {
            validDay = true;
            break;
          }
        }
        if (!validDay) {
          alert("Please enter at least one full day (start and end).");
          return false;
        }
      }
    }

    return true;
  }
</script>
</body>
</html>

